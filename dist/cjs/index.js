import e from"axios";import*as t from"lodash";import a,{createContext as n,useReducer as r,useMemo as o,useContext as s}from"react";function i(t){const a=e.create(t?.clientOptions);return a.interceptors.request.use((e=>(t?.onLoadingStart?.(),"function"==typeof t?.onRequest?t?.onRequest?.(e):e))),a.interceptors.response.use((e=>(t?.onLoadingEnd?.(),"function"==typeof t?.onResponse?t?.onResponse?.(e):e))),a}function c(e){return Object.prototype.toString.call(e).replaceAll(/\[object\s|\]/g,"").toLocaleLowerCase()}const p=e=>function(a,n,r,o=!1,s=""){if(o){if("array"!==c(a))return;return function(o=-1){let i={add(a){e?.[t.camelCase(r)]?n({type:t.camelCase(`${r}${t.startCase("add")}`),data:{index:o,data:a}}):n({type:"update-state",subType:"array-add-item",data:{path:`${s}`,index:o,data:a}})},remove(){e?.[t.camelCase(r)]?n({type:t.camelCase(`${r}${t.startCase("remove")}`),data:{index:o}}):n({type:"update-state",subType:"array-remove-item",data:{path:`${s}`,index:o}})}};if(a?.length){i.update=function(a,i){const c=t.camelCase(`${r}${t.startCase("item")}`);n(e?.[c]?{type:c,data:{index:o,key:a,value:i}}:{type:"update-state",data:{path:`${s}[${o}]`,index:o,key:a,value:i}})};for(const[u,d]of Object.entries(a[0]))"object"===c(d)&&(i[u]=p(e)(d,n,r.length?`${r}${t.startCase(u)}`:t.startCase(u),Array.isArray(d),s.length?`${s}[${o}].${u}`:`[${o}].${u}`))}return i}}if("object"===c(a)){let o={update(a,o){e?.[t.camelCase(r)]?n({type:t.camelCase(r),data:{key:a,value:o}}):n({type:"update-state",data:{path:`${s}`,key:a,value:o}})}};for(const[i,u]of Object.entries(a))"object"!==c(u)&&"array"!==c(u)||(o[i]=p(e)(u,n,r.length?`${r}${t.startCase(i)}`:t.startCase(i),Array.isArray(u),s.length?`${s}.${i}`:i));return o}return{}},u=n({});function d({reducer:e,children:n,initialState:s,functions:i}){const[d,l]=r(((a,n)=>{const{type:r,data:o,subType:s}=n||{};return e?.[r]&&"function"==typeof e?.[r]?e[r](t.cloneDeep(a),n):"update-state"===r?t.update(t.cloneDeep(a),o.path,(e=>{if("array-add-item"===s)o.data&&"array"===c(e)&&e.splice(o.index+1,0,o.data);else if("object"===c(o.key))for(const[t,a]of Object.entries(o.key))e[t]=a;else e[o.key]=o.value;return e})):a}),s),y=o((()=>p(e)(d,l,"",!1)),[d]);return o((()=>a.createElement(u.Provider,{value:{state:d,dispatch:l,functions:i&&"function"==typeof i?t.merge(y,i(l,d)):y,initialState:t.cloneDeep(s),...d}},n)),[i,n,y,d])}function l(){const e=s(u);return e||{}}export{i as ApiClient,d as ContextToolkitInitializer,l as useReactContextToolkit};
//# sourceMappingURL=index.js.map
