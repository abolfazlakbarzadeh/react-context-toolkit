import e from"axios";import*as t from"lodash";import a,{createContext as n,useReducer as r,useMemo as o,useContext as s}from"react";function c(t){const a=e.create(t?.clientOptions);return a.interceptors.request.use((e=>(t?.onLoadingStart?.(),"function"==typeof t?.onRequest?t?.onRequest?.(e):e))),a.interceptors.response.use((e=>(t?.onLoadingEnd?.(),"function"==typeof t?.onResponse?t?.onResponse?.(e):e))),a}function i(e){return Object.prototype.toString.call(e).replaceAll(/\[object\s|\]/g,"").toLocaleLowerCase()}const u=e=>function(a,n,r,o=!1,s=""){if(o){if("array"!==i(a))return;return function(o){let c={add(a){e[t.camelCase(r)]?n({type:t.camelCase(r),data:{index:o,data:a}}):n({type:"update-state",subType:"array-add-item",data:{path:`${s}`,index:o,data:a}})},remove(){e[t.camelCase(r)]?n({type:t.camelCase(r),data:{index:o}}):n({type:"update-state",subType:"array-remove-item",data:{path:`${s}`,index:o}})}};if(a?.length){c.update=function(a,c){e[t.camelCase(`${r}${t.startCase("item")}`)]?n({type:t.camelCase(`${r}${t.startCase("item")}`),data:{index:o,key:a,value:c}}):n({type:"update-state",data:{path:`${s}[${o}]`,index:o,key:a,value:c}})};for(const[p,d]of Object.entries(a[0]))"object"===i(d)&&(c[p]=u(e)(d,n,r.length?`${r}${t.startCase(p)}`:t.startCase(p),Array.isArray(d),s.length?`${s}[${o}].${p}`:`[${o}].${p}`))}return c}}if("object"===i(a)){let o={update(a,o){e[t.camelCase(r)]?n({type:t.camelCase(r),data:{key:a,value:o}}):n({type:"update-state",data:{path:`${s}`,key:a,value:o}})}};for(const[c,p]of Object.entries(a))"object"!==i(p)&&"array"!==i(p)||(o[c]=u(e)(p,n,r.length?`${r}${t.startCase(c)}`:t.startCase(c),Array.isArray(p),s.length?`${s}.${c}`:c));return o}return{}},p=n({});function d({reducer:e,children:n,initialState:s,customFunctions:c}){const[d,l]=r(((a,n)=>{const{type:r,data:o}=n||{};return e[r]&&"function"==typeof e[r]?e[r](t.cloneDeep(a),n):"update-state"===r?t.update(t.cloneDeep(a),o.path,(e=>{if("object"===i(o.key))for(const[t,a]of Object.entries(o.key))e[t]=a;else e[o.key]=o.value;return e})):a}),s),y=u(e)(d,l,"",!1);return o((()=>a.createElement(p.Provider,{value:{state:d,dispatch:l,functions:c&&"function"==typeof c?t.merge(y,c(l,d)):y,...d}},n)),[d])}function l(){const e=s(p);return e||{}}export{c as ApiClient,d as ContextToolkitInitializer,l as useReactContextToolkit};
//# sourceMappingURL=index.js.map
